module analysis/lift-sdf2

imports 
  
  include/TemplateLang
  analysis/attributes
  
rules
  
  lift-sdf2 = topdown(try(lift-sdf2-prod))
  
  lift-sdf2-prod: 
  	prod(sym*, sort(s), attrs) -> SdfProduction(s, cons, Rhs(sym*), attrs')
    where
    	cons   := <fetch-cons-name <+ !Inj()> attrs 
    ; attrs' := <remove-cons> attrs
  
  remove-cons = attrs(remove-all(fetch-cons); ?[_|_]) <+ !no-attrs()
  
